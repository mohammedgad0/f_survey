{% extends "base.html" %}
{% load i18n %}
{% block title %}Family Survey Form{% endblock %}
{% block stylesheets %}
  {{ block.super }}
  <style>

  label.error { float: none; color: red; margin: 0 .5em 0 0; vertical-align: top; font-size: 10px; display:block }
  </style>
{% endblock stylesheets %}

{% block content %}
<!--        <button type='submit' onclick="location.href='/family/2'"  class="button"><span><i class="fa fas fa-users"></i> {{ _('View all members') }}</span></button>
-->
      <div class="container-form">
        {% if form_step2.errors %}
          {% for field in form_step2 %}
              {% for error in field.errors %}
                  <div class="alert alert-danger">
                      <strong>{{ error|escape }}</strong>
                  </div>
              {% endfor %}
          {% endfor %}
          {% for error in form_step2.non_field_errors %}
              <div class="alert alert-danger">
                  <strong>{{ error|escape }}</strong>
              </div>
          {% endfor %}
      {% endif %}
      <!-- User query form added by Wisal, 7/17/08 -->
        <!--<div class="row">
          <div class="col-lg-12 text-center">
            <h2>{% trans 'Add Family Member' %}</h2>
          </div>
        </div>-->
        <form action="" method="POST" id="family-survey-from">
              <fieldset class="scheduler-border">
                 <legend class="scheduler-border"><i class="fas fa fa-user-plus"></i> {{ _('Add Family Member') }}</legend>

                   {% csrf_token %}
                   <!-- test field -->
                     <div class="col-md-6">
                       <div class="form-group">
                         {{ form_step2.family_member_id }}
                         <label for="first" class="control-label">{{ _('Family Member ID') }}</label>
                         <i class="bar"></i>
                       </div>
                     </div>
                     <!-- test field -->

                      <div class="col-md-6">
                        <div class="form-group">
                          {{ form_step2.study_status }}
                          <label for="first" class="control-label">{{ _('Study Status') }}</label>
                          <i class="bar"></i>
                        </div>
                      </div>

                      <!--  col-md-12   -->
                      <div class="col-md-6">
                        <div class="form-group">

                          {{ form_step2.education_status }}
                          <label for="last" class="control-label">{{ _('Education Status') }}</label>
                          <i class="bar"></i>
                        </div>
                      </div>

                      <!--  col-md-12   -->
                      <fieldset class="scheduler-border" id="study-field-fieldset">
                        <legend class="scheduler-border">
                          {{ _('Study Field') }}
                        </legend>
                          <div class="col-md-6" id="study-field-parent">
                            <div class="form-group">

                              {{ form_step2.study_field_parent }}
                              <!--<label for="input" class="control-label"></label>-->
                              <i class="bar"></i>
                            </div>
                          </div>
                          <!--  col-md-12   -->

                          <div class="col-md-6" id="study-field-child">
                            <div class="form-group">

                              {{ form_step2.study_field }}
                              <!--<label for="input" class="control-label">{{ _('Study Field') }}</label>-->
                              <i class="bar"></i>
                            </div>
                          </div>
                      </fieldset>
                      <!--  col-md-12   -->
                      <div class="col-md-6">
                        <div class="form-group">

                          {{ form_step2.marital_status }}
                          <label for="input" class="control-label">{{ _('Marital Status') }}</label>
                          <i class="bar"></i>
                        </div>
                      </div>
                      <!--  col-md-12   -->
                      <div class="col-md-6">
                        <div class="form-group">

                          {{ form_step2.males_count }}
                          <label for="input" class="control-label">{{ _('Males Count') }}</label>
                          <i class="bar"></i>
                          </div>
                      </div>
                      <!--  col-md-12   -->
                      <div class="col-md-6">
                        <div class="form-group">

                          {{ form_step2.females_count }}
                          <label for="input" class="control-label">{{ _('Females Count') }}</label>
                          <i class="bar"></i>
                          </div>
                      </div>
                      <!--  col-md-12   -->
                      <div class="col-md-6">
                        <div class="form-group">
                          {{ form_step2.labor_status }}
                          <label for="input" class="control-label">{{ _('Labour Status') }}</label>
                          <i class="bar"></i>
                        </div>
                      </div>

                      <div class="col-md-6">
                        <div class="form-group">

                          {{ form_step2.main_job }}
                          <label for="input" class="control-label">{{ _('Main Job') }}</label>
                          <i class="bar"></i>
                        </div>
                      </div>

                      <div class="col-md-6">
                        <div class="form-group">

                          {{ form_step2.economic_activity }}
                          <label for="input" class="control-label attachment">{{ _('Economic Activity') }}</label>
                          <i class="bar"></i>
                        </div>
                      </div>

                      <div class="col-md-6">
                        <div class="form-group">

                          {{ form_step2.work_sector_type }}
                          <label for="input" class="control-label attachment">{{ _('Work Sector Type') }}</label>
                          <i class="bar"></i>
                        </div>
                      </div>
                    </fieldset>



                    <div class="button-container-form">
                        <button type="submit" class="button"><span>{{ _('Save') }}</span></button>
                    </div>

                </form>

                <!--</fieldset>-->
              </div>


{% endblock %}

{% block javascripts %}
  {{ block.super }}
<script>

  $('#study-field-fieldset').hide();
  //$('#study-field-child').hide();

  $('#id_education_status').on('change', function(){
      var study_field_id = $(this).val();
      if( study_field_id >= 10500005 && study_field_id <= 10500012 )
      {
        $('#study-field-fieldset').show();
      //  $('#study-field-parent select').trigger('change');
      }
      else{
        $('#study-field-fieldset').hide();
        //$('#study-field-child').hide();
      }
  });
  $('#study-field-parent select').on('change', function(){
    var study_field_parent_id = $(this).val();
    //console.log(study_field_parent_id);
    $.ajax({                       // initialize an AJAX request
        url: '/ajax/options/',                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
        data: {
          'lookup_list_id': study_field_parent_id,
          'lookup_id': 10       // add the country id to the GET parameters
        },
        success: function (data) {   // `data` is the return of the `load_cities` view function
          //$('#study-field-child').show();
          $("#study-field-child select").html(data);  // replace the contents of the city input with the data that came from the server
        }
      });

  });
  $('#id_education_status').trigger('change');
</script>
{% endblock %}
